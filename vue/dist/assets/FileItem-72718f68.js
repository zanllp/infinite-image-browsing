import{c as v,A as ie,aw as fe,ax as ce,x as he,o as s,B as C,cv as Ye,cw as Ge,cx as qe,bh as Ze,cy as xe,bc as Oe,j as d,ah as Z,m as h,C as g,F as N,K as M,bi as be,bj as Xe,cz as et,J as Ne,V as J,d as ge,p as Be,aj as Y,l as p,t as u,E as I,cA as tt,a4 as Me,cr as it,cq as nt,M as Fe,k as o,n as Re,cB as st,ce as ot,cC as lt,bm as rt,r as x,ay as at,s as Ae,cD as ke,U as _e,cE as dt,ck as ut,cF as ft,cG as ct,cH as Ie,cI as ht,cJ as se,G as gt,bk as pt,cK as mt,cL as vt,ar as yt,cj as bt,cM as At,cN as kt,cO as _t,bO as It}from"./index-f2db319b.js";import{D as G,a as le}from"./index-29e38a15.js";G.Button=le;G.install=function(e){return e.component(G.name,G),e.component(le.name,le),e};var St={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};const Tt=St;function Se(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable}))),n.forEach(function(l){Ct(e,l,i[l])})}return e}function Ct(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var pe=function(t,i){var n=Se({},t,i.attrs);return v(ie,Se({},n,{icon:Tt}),null)};pe.displayName="StarFilled";pe.inheritAttrs=!1;const Ve=pe;var Et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};const wt=Et;function Te(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable}))),n.forEach(function(l){Pt(e,l,i[l])})}return e}function Pt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var me=function(t,i){var n=Te({},t,i.attrs);return v(ie,Te({},n,{icon:wt}),null)};me.displayName="FileOutlined";me.inheritAttrs=!1;const Dt=me,zt="data:image/png;base64,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";var Qt={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};const $t=Qt;function Ce(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable}))),n.forEach(function(l){Ot(e,l,i[l])})}return e}function Ot(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ve=function(t,i){var n=Ce({},t,i.attrs);return v(ie,Ce({},n,{icon:$t}),null)};ve.displayName="CaretRightOutlined";ve.inheritAttrs=!1;const Ee=ve;var Nt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};const Bt=Nt;function we(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable}))),n.forEach(function(l){Mt(e,l,i[l])})}return e}function Mt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ye=function(t,i){var n=we({},t,i.attrs);return v(ie,we({},n,{icon:Bt}),null)};ye.displayName="StarOutlined";ye.inheritAttrs=!1;const je=ye,Pe="/infinite_image_browsing/fe-static/assets/play-68f5544d.svg";function Ft(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var i=e.indexOf("Trident/");if(i>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var l=e.indexOf("Edge/");return l>0?parseInt(e.substring(l+5,e.indexOf(".",l)),10):-1}let ee;function re(){re.init||(re.init=!0,ee=Ft()!==-1)}var ne={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){re(),he(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",ee&&this.$el.appendChild(e),e.data="about:blank",ee||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!ee&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const Rt=Ye();fe("data-v-b329ee4c");const Vt={class:"resize-observer",tabindex:"-1"};ce();const jt=Rt((e,t,i,n,l,a)=>(s(),C("div",Vt)));ne.render=jt;ne.__scopeId="data-v-b329ee4c";ne.__file="src/components/ResizeObserver.vue";function te(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?te=function(t){return typeof t}:te=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(e)}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jt(e,t,i){return t&&De(e.prototype,t),i&&De(e,i),e}function ze(e){return Ht(e)||Ut(e)||Kt(e)||Wt()}function Ht(e){if(Array.isArray(e))return ae(e)}function Ut(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Kt(e,t){if(e){if(typeof e=="string")return ae(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ae(e,t)}}function ae(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Wt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yt(e){var t;return typeof e=="function"?t={callback:e}:t=e,t}function Gt(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,l,a,m=function(y){for(var A=arguments.length,z=new Array(A>1?A-1:0),Q=1;Q<A;Q++)z[Q-1]=arguments[Q];if(a=z,!(n&&y===l)){var T=i.leading;typeof T=="function"&&(T=T(y,l)),(!n||y!==l)&&T&&e.apply(void 0,[y].concat(ze(a))),l=y,clearTimeout(n),n=setTimeout(function(){e.apply(void 0,[y].concat(ze(a))),n=0},t)}};return m._clear=function(){clearTimeout(n),n=null},m}function Le(e,t){if(e===t)return!0;if(te(e)==="object"){for(var i in e)if(!Le(e[i],t[i]))return!1;return!0}return!1}var qt=function(){function e(t,i,n){Lt(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(i,n)}return Jt(e,[{key:"createObserver",value:function(i,n){var l=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=Yt(i),this.callback=function(f,y){l.options.callback(f,y),f&&l.options.once&&(l.frozen=!0,l.destroyObserver())},this.callback&&this.options.throttle){var a=this.options.throttleOptions||{},m=a.leading;this.callback=Gt(this.callback,this.options.throttle,{leading:function(y){return m==="both"||m==="visible"&&y||m==="hidden"&&!y}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(f){var y=f[0];if(f.length>1){var A=f.find(function(Q){return Q.isIntersecting});A&&(y=A)}if(l.callback){var z=y.isIntersecting&&y.intersectionRatio>=l.threshold;if(z===l.oldResult)return;l.oldResult=z,l.callback(z,y)}},this.options.intersection),he(function(){l.observer&&l.observer.observe(l.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function Je(e,t,i){var n=t.value;if(n)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var l=new qt(e,n,i);e._vue_visibilityState=l}}function Zt(e,t,i){var n=t.value,l=t.oldValue;if(!Le(n,l)){var a=e._vue_visibilityState;if(!n){He(e);return}a?a.createObserver(n,i):Je(e,{value:n},i)}}function He(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var xt={beforeMount:Je,updated:Zt,unmounted:He},Xt={itemsLimit:1e3},ei=/(auto|scroll)/;function Ue(e,t){return e.parentNode===null?t:Ue(e.parentNode,t.concat([e]))}var oe=function(t,i){return getComputedStyle(t,null).getPropertyValue(i)},ti=function(t){return oe(t,"overflow")+oe(t,"overflow-y")+oe(t,"overflow-x")},ii=function(t){return ei.test(ti(t))};function Qe(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var t=Ue(e.parentNode,[]),i=0;i<t.length;i+=1)if(ii(t[i]))return t[i];return document.scrollingElement||document.documentElement}}function de(e){"@babel/helpers - typeof";return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},de(e)}var ni={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(t){return["vertical","horizontal"].includes(t)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function si(){return this.items.length&&de(this.items[0])!=="object"}var ue=!1;if(typeof window<"u"){ue=!1;try{var oi=Object.defineProperty({},"passive",{get:function(){ue=!0}});window.addEventListener("test",null,oi)}catch{}}let li=0;var Ke={name:"RecycleScroller",components:{ResizeObserver:ne},directives:{ObserveVisibility:xt},props:{...ni,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},t=this.items,i=this.sizeField,n=this.minItemSize;let l=1e4,a=0,m;for(let f=0,y=t.length;f<y;f++)m=t[f][i]||n,m<l&&(l=m),a+=m,e[f]={accumulator:a,size:m};return this.$_computedMinItemSize=l,e}return[]},simpleArray:si,itemIndexByKey(){const{keyField:e,items:t}=this,i={};for(let n=0,l=t.length;n<l;n++)i[t[n][e]]=n;return i}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,t,i,n,l){const a=Ge({id:li++,index:t,used:!0,key:n,type:l}),m=qe({item:i,position:0,nr:a});return e.push(m),m},unuseView(e,t=!1){const i=this.$_unusedViews,n=e.nr.type;let l=i.get(n);l||(l=[],i.set(n,l)),l.push(e),t||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const t=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:i}=this.updateVisibleItems(!1,!0);i||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});t(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&t()},this.updateInterval))}},handleVisibilityChange(e,t){this.ready&&(e||t.boundingClientRect.width!==0||t.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,t=!1){const i=this.itemSize,n=this.gridItems||1,l=this.itemSecondarySize||i,a=this.$_computedMinItemSize,m=this.typeField,f=this.simpleArray?null:this.keyField,y=this.items,A=y.length,z=this.sizes,Q=this.$_views,T=this.$_unusedViews,H=this.pool,P=this.itemIndexByKey;let S,E,U,B,F;if(!A)S=E=B=F=U=0;else if(this.$_prerender)S=B=0,E=F=Math.min(this.prerender,y.length),U=null;else{const c=this.getScroll();if(t){let O=c.start-this.$_lastUpdateScrollPosition;if(O<0&&(O=-O),i===null&&O<a||O<i)return{continuous:!0}}this.$_lastUpdateScrollPosition=c.start;const w=this.buffer;c.start-=w,c.end+=w;let D=0;if(this.$refs.before&&(D=this.$refs.before.scrollHeight,c.start-=D),this.$refs.after){const O=this.$refs.after.scrollHeight;c.end+=O}if(i===null){let O,L=0,W=A-1,$=~~(A/2),b;do b=$,O=z[$].accumulator,O<c.start?L=$:$<A-1&&z[$+1].accumulator>c.start&&(W=$),$=~~((L+W)/2);while($!==b);for($<0&&($=0),S=$,U=z[A-1].accumulator,E=$;E<A&&z[E].accumulator<c.end;E++);for(E===-1?E=y.length-1:(E++,E>A&&(E=A)),B=S;B<A&&D+z[B].accumulator<c.start;B++);for(F=B;F<A&&D+z[F].accumulator<c.end;F++);}else{S=~~(c.start/i*n);const O=S%n;S-=O,E=Math.ceil(c.end/i*n),B=Math.max(0,Math.floor((c.start-D)/i*n)),F=Math.floor((c.end-D)/i*n),S<0&&(S=0),E>A&&(E=A),B<0&&(B=0),F>A&&(F=A),U=Math.ceil(A/n)*i}}E-S>Xt.itemsLimit&&this.itemsLimitError(),this.totalSize=U;let k;const K=S<=this.$_endIndex&&E>=this.$_startIndex;if(K)for(let c=0,w=H.length;c<w;c++)k=H[c],k.nr.used&&(e&&(k.nr.index=P[k.item[f]]),(k.nr.index==null||k.nr.index<S||k.nr.index>=E)&&this.unuseView(k));const q=K?null:new Map;let V,R,r;for(let c=S;c<E;c++){V=y[c];const w=f?V[f]:V;if(w==null)throw new Error(`Key is ${w} on item (keyField is '${f}')`);if(k=Q.get(w),!i&&!z[c].size){k&&this.unuseView(k);continue}R=V[m];let D=T.get(R),O=!1;if(!k)K?D&&D.length?k=D.pop():k=this.addView(H,c,V,w,R):(r=q.get(R)||0,(!D||r>=D.length)&&(k=this.addView(H,c,V,w,R),this.unuseView(k,!0),D=T.get(R)),k=D[r],q.set(R,r+1)),Q.delete(k.nr.key),k.nr.used=!0,k.nr.index=c,k.nr.key=w,k.nr.type=R,Q.set(w,k),O=!0;else if(!k.nr.used&&(k.nr.used=!0,k.nr.index=c,O=!0,D)){const L=D.indexOf(k);L!==-1&&D.splice(L,1)}k.item=V,O&&(c===y.length-1&&this.$emit("scroll-end"),c===0&&this.$emit("scroll-start")),i===null?(k.position=z[c-1].accumulator,k.offset=0):(k.position=Math.floor(c/n)*i,k.offset=c%n*l)}return this.$_startIndex=S,this.$_endIndex=E,this.emitUpdate&&this.$emit("update",S,E,B,F),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:K}},getListenerTarget(){let e=Qe(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:t}=this,i=t==="vertical";let n;if(this.pageMode){const l=e.getBoundingClientRect(),a=i?l.height:l.width;let m=-(i?l.top:l.left),f=i?window.innerHeight:window.innerWidth;m<0&&(f+=m,m=0),m+f>a&&(f=a-m),n={start:m,end:m+f}}else i?n={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:n={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return n},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,ue?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let t;const i=this.gridItems||1;this.itemSize===null?t=e>0?this.sizes[e-1].accumulator:0:t=Math.floor(e/i)*this.itemSize,this.scrollToPosition(t)},scrollToPosition(e){const t=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let i,n,l;if(this.pageMode){const a=Qe(this.$el),m=a.tagName==="HTML"?0:a[t.scroll],f=a.getBoundingClientRect(),A=this.$el.getBoundingClientRect()[t.start]-f[t.start];i=a,n=t.scroll,l=e+m+A}else i=this.$el,n=t.scroll,l=e;i[n]=l},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,t)=>e.nr.index-t.nr.index)}}};const ri={key:0,ref:"before",class:"vue-recycle-scroller__slot"},ai={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function di(e,t,i,n,l,a){const m=Ze("ResizeObserver"),f=xe("observe-visibility");return Oe((s(),d("div",{class:J(["vue-recycle-scroller",{ready:l.ready,"page-mode":i.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:t[0]||(t[0]=(...y)=>a.handleScroll&&a.handleScroll(...y))},[e.$slots.before?(s(),d("div",ri,[Z(e.$slots,"before")],512)):h("v-if",!0),(s(),C(be(i.listTag),{ref:"wrapper",style:Ne({[e.direction==="vertical"?"minHeight":"minWidth"]:l.totalSize+"px"}),class:J(["vue-recycle-scroller__item-wrapper",i.listClass])},{default:g(()=>[(s(!0),d(N,null,M(l.pool,y=>(s(),C(be(i.itemTag),Xe({key:y.nr.id,style:l.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${y.position}px) translate${e.direction==="vertical"?"X":"Y"}(${y.offset}px)`,width:i.gridItems?`${e.direction==="vertical"&&i.itemSecondarySize||i.itemSize}px`:void 0,height:i.gridItems?`${e.direction==="horizontal"&&i.itemSecondarySize||i.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[i.itemClass,{hover:!i.skipHover&&l.hoverKey===y.nr.key}]]},et(i.skipHover?{}:{mouseenter:()=>{l.hoverKey=y.nr.key},mouseleave:()=>{l.hoverKey=null}})),{default:g(()=>[Z(e.$slots,"default",{item:y.item,index:y.nr.index,active:y.nr.used})]),_:2},1040,["style","class"]))),128)),Z(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(s(),d("div",ai,[Z(e.$slots,"after")],512)):h("v-if",!0),v(m,{onNotify:a.handleResize},null,8,["onNotify"])],34)),[[f,a.handleVisibilityChange]])}Ke.render=di;Ke.__file="src/components/RecycleScroller.vue";const $e=ge({__name:"ContextMenu",props:{file:{},idx:{},selectedTag:{},isSelectedMutilFiles:{type:Boolean}},emits:["contextMenuClick"],setup(e,{emit:t}){const i=e,n=Be(),l=Y(()=>{var a;return(((a=n.conf)==null?void 0:a.all_custom_tags)??[]).reduce((m,f)=>[...m,{...f,selected:!!i.selectedTag.find(y=>y.id===f.id)}],[])});return(a,m)=>{const f=Me,y=it,A=nt,z=Fe;return s(),C(z,{onClick:m[0]||(m[0]=Q=>t("contextMenuClick",Q,a.file,a.idx))},{default:g(()=>{var Q;return[v(f,{key:"deleteFiles"},{default:g(()=>[p(u(a.$t("deleteSelected")),1)]),_:1}),v(f,{key:"openWithDefaultApp"},{default:g(()=>[p(u(a.$t("openWithDefaultApp")),1)]),_:1}),v(f,{key:"saveSelectedAsJson"},{default:g(()=>[p(u(a.$t("saveSelectedAsJson")),1)]),_:1}),a.file.type==="dir"?(s(),d(N,{key:0},[v(f,{key:"openInNewTab"},{default:g(()=>[p(u(a.$t("openInNewTab")),1)]),_:1}),v(f,{key:"openOnTheRight"},{default:g(()=>[p(u(a.$t("openOnTheRight")),1)]),_:1}),v(f,{key:"openWithWalkMode"},{default:g(()=>[p(u(a.$t("openWithWalkMode")),1)]),_:1})],64)):h("",!0),a.file.type==="file"?(s(),d(N,{key:1},[I(tt)(a.file.name)?(s(),d(N,{key:0},[v(f,{key:"viewGenInfo"},{default:g(()=>[p(u(a.$t("viewGenerationInfo")),1)]),_:1}),v(f,{key:"tiktokView"},{default:g(()=>[p(u(a.$t("tiktokView")),1)]),_:1}),v(y),((Q=I(n).conf)==null?void 0:Q.launch_mode)!=="server"?(s(),d(N,{key:0},[v(f,{key:"send2txt2img"},{default:g(()=>[p(u(a.$t("sendToTxt2img")),1)]),_:1}),v(f,{key:"send2img2img"},{default:g(()=>[p(u(a.$t("sendToImg2img")),1)]),_:1}),v(f,{key:"send2inpaint"},{default:g(()=>[p(u(a.$t("sendToInpaint")),1)]),_:1}),v(f,{key:"send2extras"},{default:g(()=>[p(u(a.$t("sendToExtraFeatures")),1)]),_:1}),v(A,{key:"sendToThirdPartyExtension",title:a.$t("sendToThirdPartyExtension")},{default:g(()=>[v(f,{key:"send2controlnet-txt2img"},{default:g(()=>[p("ControlNet - "+u(a.$t("t2i")),1)]),_:1}),v(f,{key:"send2controlnet-img2img"},{default:g(()=>[p("ControlNet - "+u(a.$t("i2i")),1)]),_:1}),v(f,{key:"send2outpaint"},{default:g(()=>[p("openOutpaint")]),_:1})]),_:1},8,["title"])],64)):h("",!0),v(f,{key:"send2BatchDownload"},{default:g(()=>[p(u(a.$t("sendToBatchDownload")),1)]),_:1}),v(A,{key:"copy2target",title:a.$t("copyTo")},{default:g(()=>[(s(!0),d(N,null,M(I(n).quickMovePaths,T=>(s(),C(f,{key:`copy-to-${T.dir}`},{default:g(()=>[p(u(T.zh),1)]),_:2},1024))),128))]),_:1},8,["title"]),v(A,{key:"move2target",title:a.$t("moveTo")},{default:g(()=>[(s(!0),d(N,null,M(I(n).quickMovePaths,T=>(s(),C(f,{key:`move-to-${T.dir}`},{default:g(()=>[p(u(T.zh),1)]),_:2},1024))),128))]),_:1},8,["title"]),v(y),a.isSelectedMutilFiles?(s(),d(N,{key:1},[v(A,{key:"batch-add-tag",title:a.$t("batchAddTag")},{default:g(()=>[v(f,{key:"add-custom-tag"},{default:g(()=>[p("+ "+u(a.$t("addNewCustomTag")),1)]),_:1}),(s(!0),d(N,null,M(l.value,T=>(s(),C(f,{key:`batch-add-tag-${T.id}`},{default:g(()=>[p(u(T.name),1)]),_:2},1024))),128))]),_:1},8,["title"]),v(A,{key:"batch-remove-tag",title:a.$t("batchRemoveTag")},{default:g(()=>[(s(!0),d(N,null,M(l.value,T=>(s(),C(f,{key:`batch-remove-tag-${T.id}`},{default:g(()=>[p(u(T.name),1)]),_:2},1024))),128))]),_:1},8,["title"])],64)):(s(),C(A,{key:"toggle-tag",title:a.$t("toggleTag")},{default:g(()=>[v(f,{key:"add-custom-tag"},{default:g(()=>[p("+ "+u(a.$t("addNewCustomTag")),1)]),_:1}),(s(!0),d(N,null,M(l.value,T=>(s(),C(f,{key:`toggle-tag-${T.id}`},{default:g(()=>[p(u(T.name)+" ",1),T.selected?(s(),C(I(Ve),{key:0})):(s(),C(I(je),{key:1}))]),_:2},1024))),128))]),_:1},8,["title"])),v(y),v(f,{key:"openFileLocationInNewTab"},{default:g(()=>[p(u(a.$t("openFileLocationInNewTab")),1)]),_:1}),v(f,{key:"openWithLocalFileBrowser"},{default:g(()=>[p(u(a.$t("openWithLocalFileBrowser")),1)]),_:1})],64)):h("",!0),v(y),v(f,{key:"rename"},{default:g(()=>[p(u(a.$t("rename")),1)]),_:1}),v(f,{key:"previewInNewWindow"},{default:g(()=>[p(u(a.$t("previewInNewWindow")),1)]),_:1}),v(f,{key:"download"},{default:g(()=>[p(u(a.$t("download")),1)]),_:1}),v(f,{key:"copyPreviewUrl"},{default:g(()=>[p(u(a.$t("copySourceFilePreviewLink")),1)]),_:1}),v(f,{key:"copyFilePath"},{default:g(()=>[p(u(a.$t("copyFilePath")),1)]),_:1})],64)):h("",!0)]}),_:1})}}}),_=e=>(fe("data-v-78cd67a3"),e=e(),ce(),e),ui={class:"changeIndicatorWrapper"},fi={key:0,class:"changeIndicatorsLeft changeIndicators"},ci={key:0,class:"promptChangeIndicator changeIndicator"},hi={key:1,class:"negpromptChangeIndicator changeIndicator"},gi={key:2,class:"seedChangeIndicator changeIndicator"},pi={key:3,class:"stepsChangeIndicator changeIndicator"},mi={key:4,class:"cfgChangeIndicator changeIndicator"},vi={key:5,class:"sizeChangeIndicator changeIndicator"},yi={key:6,class:"modelChangeIndicator changeIndicator"},bi={key:7,class:"samplerChangeIndicator changeIndicator"},Ai={key:8,class:"otherChangeIndicator changeIndicator"},ki={class:"hoverOverlay"},_i=_(()=>o("strong",null,"This file",-1)),Ii=_(()=>o("br",null,null,-1)),Si=_(()=>o("br",null,null,-1)),Ti={key:0},Ci=_(()=>o("td",null,[o("span",{class:"promptChangeIndicator"},"+ Prompt")],-1)),Ei={key:1},wi=_(()=>o("td",null,[o("span",{class:"negpromptChangeIndicator"},"- Prompt")],-1)),Pi={key:2},Di=_(()=>o("td",null,[o("span",{class:"seedChangeIndicator"},"Seed")],-1)),zi={key:3},Qi=_(()=>o("td",null,[o("span",{class:"stepsChangeIndicator"},"Steps")],-1)),$i={key:4},Oi=_(()=>o("td",null,[o("span",{class:"cfgChangeIndicator"},"Cfg Scale")],-1)),Ni={key:5},Bi=_(()=>o("td",null,[o("span",{class:"sizeChangeIndicator"},"Size")],-1)),Mi={key:6},Fi=_(()=>o("td",null,[o("span",{class:"modelChangeIndicator"},"Model")],-1)),Ri=_(()=>o("br",null,null,-1)),Vi={key:7},ji=_(()=>o("td",null,[o("span",{class:"samplerChangeIndicator"},"Sampler")],-1)),Li=_(()=>o("br",null,null,-1)),Ji=_(()=>o("br",null,null,-1)),Hi={key:0},Ui=_(()=>o("span",{class:"otherChangeIndicator"},"Other",-1)),Ki=_(()=>o("br",null,null,-1)),Wi=_(()=>o("br",null,null,-1)),Yi={key:1,class:"changeIndicatorsRight changeIndicators"},Gi={key:0,class:"promptChangeIndicator changeIndicator"},qi={key:1,class:"negpromptChangeIndicator changeIndicator"},Zi={key:2,class:"seedChangeIndicator changeIndicator"},xi={key:3,class:"stepsChangeIndicator changeIndicator"},Xi={key:4,class:"cfgChangeIndicator changeIndicator"},en={key:5,class:"sizeChangeIndicator changeIndicator"},tn={key:6,class:"modelChangeIndicator changeIndicator"},nn={key:7,class:"samplerChangeIndicator changeIndicator"},sn={key:8,class:"otherChangeIndicator changeIndicator"},on={class:"hoverOverlay"},ln=_(()=>o("strong",null,"This file",-1)),rn=_(()=>o("br",null,null,-1)),an=_(()=>o("br",null,null,-1)),dn={key:0},un=_(()=>o("td",null,[o("span",{class:"promptChangeIndicator"},"+ Prompt")],-1)),fn={key:1},cn=_(()=>o("td",null,[o("span",{class:"negpromptChangeIndicator"},"- Prompt")],-1)),hn={key:2},gn=_(()=>o("td",null,[o("span",{class:"seedChangeIndicator"},"Seed")],-1)),pn={key:3},mn=_(()=>o("td",null,[o("span",{class:"stepsChangeIndicator"},"Steps")],-1)),vn={key:4},yn=_(()=>o("td",null,[o("span",{class:"cfgChangeIndicator"},"Cfg Scale")],-1)),bn={key:5},An=_(()=>o("td",null,[o("span",{class:"sizeChangeIndicator"},"Size")],-1)),kn={key:6},_n=_(()=>o("td",null,[o("span",{class:"modelChangeIndicator"},"Model")],-1)),In=_(()=>o("br",null,null,-1)),Sn={key:7},Tn=_(()=>o("td",null,[o("span",{class:"samplerChangeIndicator"},"Sampler")],-1)),Cn=_(()=>o("br",null,null,-1)),En=_(()=>o("br",null,null,-1)),wn={key:0},Pn=_(()=>o("span",{class:"otherChangeIndicator"},"Other",-1)),Dn=_(()=>o("br",null,null,-1)),zn=_(()=>o("br",null,null,-1)),Qn=ge({__name:"ChangeIndicator",props:{genDiffToPrevious:{},genDiffToNext:{},genInfo:{}},setup(e){function t(n){const l=["prompt","negativePrompt","seed","steps","cfgScale","size","Model","others"],a=Object.keys(n).filter(m=>!l.includes(m));return Object.fromEntries(a.map(m=>[m,n[m]]))}function i(n){return Object.keys(t(n)).length>0}return(n,l)=>(s(),d("div",ui,[n.genDiffToPrevious.empty?h("",!0):(s(),d("div",fi,["prompt"in n.genDiffToPrevious.diff?(s(),d("div",ci,"P+")):h("",!0),"negativePrompt"in n.genDiffToPrevious.diff?(s(),d("div",hi,"P-")):h("",!0),"seed"in n.genDiffToPrevious.diff?(s(),d("div",gi,"Se")):h("",!0),"steps"in n.genDiffToPrevious.diff?(s(),d("div",pi,"St")):h("",!0),"cfgScale"in n.genDiffToPrevious.diff?(s(),d("div",mi,"Cf")):h("",!0),"size"in n.genDiffToPrevious.diff?(s(),d("div",vi,"Si")):h("",!0),"Model"in n.genDiffToPrevious.diff?(s(),d("div",yi,"Mo")):h("",!0),"Sampler"in n.genDiffToPrevious.diff?(s(),d("div",bi,"Sa")):h("",!0),i(n.genDiffToPrevious.diff)?(s(),d("div",Ai,"Ot")):h("",!0)])),o("div",ki,[o("small",null,[v(I(Ee)),_i,p(" vs "+u(n.genDiffToPrevious.otherFile)+" ",1),Ii,Si,o("table",null,["prompt"in n.genDiffToPrevious.diff?(s(),d("tr",Ti,[Ci,o("td",null,u(n.genDiffToPrevious.diff.prompt)+" tokens changed",1)])):h("",!0),"negativePrompt"in n.genDiffToPrevious.diff?(s(),d("tr",Ei,[wi,o("td",null,u(n.genDiffToPrevious.diff.negativePrompt)+" tokens changed",1)])):h("",!0),"seed"in n.genDiffToPrevious.diff?(s(),d("tr",Pi,[Di,o("td",null,[o("strong",null,u(n.genDiffToPrevious.diff.seed[0]),1),p(" vs "+u(n.genDiffToPrevious.diff.seed[1]),1)])])):h("",!0),"steps"in n.genDiffToPrevious.diff?(s(),d("tr",zi,[Qi,o("td",null,[o("strong",null,u(n.genDiffToPrevious.diff.steps[0]),1),p(" vs "+u(n.genDiffToPrevious.diff.steps[1]),1)])])):h("",!0),"cfgScale"in n.genDiffToPrevious.diff?(s(),d("tr",$i,[Oi,o("td",null,[o("strong",null,u(n.genDiffToPrevious.diff.cfgScale[0]),1),p(" vs "+u(n.genDiffToPrevious.diff.cfgScale[1]),1)])])):h("",!0),"size"in n.genDiffToPrevious.diff?(s(),d("tr",Ni,[Bi,o("td",null,[o("strong",null,u(n.genDiffToPrevious.diff.size[0]),1),p(" vs "+u(n.genDiffToPrevious.diff.size[1]),1)])])):h("",!0),"Model"in n.genDiffToPrevious.diff?(s(),d("tr",Mi,[Fi,o("td",null,[o("strong",null,u(n.genDiffToPrevious.diff.Model[0]),1),Ri,p(" vs "+u(n.genDiffToPrevious.diff.Model[1]),1)])])):h("",!0),"Sampler"in n.genDiffToPrevious.diff?(s(),d("tr",Vi,[ji,o("td",null,[o("strong",null,u(n.genDiffToPrevious.diff.Sampler[0]),1),Li,p(" vs "+u(n.genDiffToPrevious.diff.Sampler[1]),1)])])):h("",!0)]),Ji,i(n.genDiffToPrevious.diff)?(s(),d("div",Hi,[Ui,p(" props that changed:"),Ki,Wi,o("ul",null,[(s(!0),d(N,null,M(t(n.genDiffToPrevious.diff),(a,m)=>(s(),d("li",null,u(m),1))),256))])])):h("",!0)])]),n.genDiffToNext.empty?h("",!0):(s(),d("div",Yi,["prompt"in n.genDiffToNext.diff?(s(),d("div",Gi,"P+")):h("",!0),"negativePrompt"in n.genDiffToNext.diff?(s(),d("div",qi,"P-")):h("",!0),"seed"in n.genDiffToNext.diff?(s(),d("div",Zi,"Se")):h("",!0),"steps"in n.genDiffToNext.diff?(s(),d("div",xi,"St")):h("",!0),"cfgScale"in n.genDiffToNext.diff?(s(),d("div",Xi,"Cf")):h("",!0),"size"in n.genDiffToNext.diff?(s(),d("div",en,"Si")):h("",!0),"Model"in n.genDiffToNext.diff?(s(),d("div",tn,"Mo")):h("",!0),"Sampler"in n.genDiffToNext.diff?(s(),d("div",nn,"Sa")):h("",!0),i(n.genDiffToNext.diff)?(s(),d("div",sn,"Ot")):h("",!0)])),o("div",on,[o("small",null,[v(I(Ee)),ln,p(" vs "+u(n.genDiffToNext.otherFile)+" ",1),rn,an,o("table",null,["prompt"in n.genDiffToNext.diff?(s(),d("tr",dn,[un,o("td",null,u(n.genDiffToNext.diff.prompt)+" tokens changed",1)])):h("",!0),"negativePrompt"in n.genDiffToNext.diff?(s(),d("tr",fn,[cn,o("td",null,u(n.genDiffToNext.diff.negativePrompt)+" tokens changed",1)])):h("",!0),"seed"in n.genDiffToNext.diff?(s(),d("tr",hn,[gn,o("td",null,[o("strong",null,u(n.genDiffToNext.diff.seed[0]),1),p(" vs "+u(n.genDiffToNext.diff.seed[1]),1)])])):h("",!0),"steps"in n.genDiffToNext.diff?(s(),d("tr",pn,[mn,o("td",null,[o("strong",null,u(n.genDiffToNext.diff.steps[0]),1),p(" vs "+u(n.genDiffToNext.diff.steps[1]),1)])])):h("",!0),"cfgScale"in n.genDiffToNext.diff?(s(),d("tr",vn,[yn,o("td",null,[o("strong",null,u(n.genDiffToNext.diff.cfgScale[0]),1),p(" vs "+u(n.genDiffToNext.diff.cfgScale[1]),1)])])):h("",!0),"size"in n.genDiffToNext.diff?(s(),d("tr",bn,[An,o("td",null,[o("strong",null,u(n.genDiffToNext.diff.size[0]),1),p(" vs "+u(n.genDiffToNext.diff.size[1]),1)])])):h("",!0),"Model"in n.genDiffToNext.diff?(s(),d("tr",kn,[_n,o("td",null,[o("strong",null,u(n.genDiffToNext.diff.Model[0]),1),In,p(" vs "+u(n.genDiffToNext.diff.Model[1]),1)])])):h("",!0),"Sampler"in n.genDiffToNext.diff?(s(),d("tr",Sn,[Tn,o("td",null,[o("strong",null,u(n.genDiffToNext.diff.Sampler[0]),1),Cn,p(" vs "+u(n.genDiffToNext.diff.Sampler[1]),1)])])):h("",!0)]),En,i(n.genDiffToNext.diff)?(s(),d("div",wn,[Pn,p(" props that changed:"),Dn,zn,o("ul",null,[(s(!0),d(N,null,M(t(n.genDiffToNext.diff),(a,m)=>(s(),d("li",null,u(m),1))),256))])])):h("",!0)])])]))}});const $n=Re(Qn,[["__scopeId","data-v-78cd67a3"]]),{eventEmitter:On,useEventListen:Nn}=st(),Bn=e=>(fe("data-v-967be71e"),e=e(),ce(),e),Mn=["data-idx"],Fn={key:1,class:"more"},Rn={class:"float-btn-wrap"},Vn={key:1,class:"tags-container"},jn=["url"],Ln=["src"],Jn={class:"inline-play-btn"},Hn=["src"],Un={class:"play-text"},Kn={class:"play-icon"},Wn=["src"],Yn={key:2,class:"tags-container"},Gn=Bn(()=>o("div",{class:"audio-icon"},"ðŸŽµ",-1)),qn={key:0,class:"tags-container"},Zn={key:5,class:"preview-icon-wrap"},xn={key:1,class:"dir-cover-container"},Xn=["src"],es={key:6,class:"profile"},ts=["title"],is={class:"basic-info"},ns={style:{"margin-right":"4px"}},X=160,ss=ge({__name:"FileItem",props:{file:{},idx:{},selected:{type:Boolean,default:!1},showMenuIdx:{},cellWidth:{},fullScreenPreviewImageUrl:{},enableRightClickMenu:{type:Boolean,default:!0},enableCloseIcon:{type:Boolean,default:!1},isSelectedMutilFiles:{type:Boolean},genInfo:{},enableChangeIndicator:{type:Boolean},extraTags:{},coverFiles:{},getGenDiff:{},getGenDiffWatchDep:{}},emits:["update:showMenuIdx","fileItemClick","dragstart","dragend","dropToFolder","previewVisibleChange","contextMenuClick","close-icon-click","tiktokView"],setup(e,{emit:t}){const i=e;ot(r=>({"132216e7":r.$props.cellWidth+"px"}));const{t:n}=lt(),l=Be(),a=rt(),m=x(),f=x(),y=at(()=>{const{getGenDiff:r,file:c,idx:w}=i;r&&(f.value=r(c.gen_info_obj,w,1,c),m.value=r(c.gen_info_obj,w,-1,c))},200+100*Math.random());Ae(()=>{var r;return(r=i.getGenDiffWatchDep)==null?void 0:r.call(i,i.idx)},()=>{y()},{immediate:!0,deep:!0});const A=Y(()=>a.tagMap.get(i.file.fullpath)??[]),z=Y(()=>{const r=l.gridThumbnailResolution;return l.enableThumbnail?ke(i.file,[r,r].join("x")):_e(i.file)}),Q=Y(()=>{var r;return(((r=l.conf)==null?void 0:r.all_custom_tags)??[]).reduce((c,w)=>[...c,{...w,selected:!!A.value.find(D=>D.id===w.id)}],[])}),T=Y(()=>Q.value.find(r=>r.type==="custom"&&r.name==="like")),H=()=>{yt(T.value),t("contextMenuClick",{key:`toggle-tag-${T.value.id}`},i.file,i.idx)},P=x(!1),S=x(null),E=r=>{console.log("toggleInlinePlay",{event:r,isPlayingInline:P.value,videoRef:S.value}),r.stopPropagation(),P.value||On.emit("stopInlinePlay"),P.value=!P.value,P.value?he(()=>{S.value?(console.log("Playing video",S.value),S.value.play().catch(c=>{console.error("Play failed:",c),P.value=!1})):(console.error("Video ref is null after nextTick"),P.value=!1)}):S.value&&S.value.pause()};Nn("stopInlinePlay",()=>{P.value&&S.value&&(S.value.pause(),P.value=!1)});const B=()=>{P.value=!1},F=Y(()=>i.cellWidth>400&&!P.value);Ae(()=>i.idx,()=>{P.value&&S.value&&(S.value.pause(),P.value=!1)});const k=r=>{i.file.type==="dir"&&(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="move"))},K=r=>{i.file.type==="dir"&&(r.preventDefault(),r.stopPropagation(),t("dropToFolder",r,i.file,i.idx))},q=r=>{l.magicSwitchTiktokView&&i.file.type==="file"&&Ie(i.file.name)?(r.stopPropagation(),r.preventDefault(),t("tiktokView",i.file,i.idx),setTimeout(()=>{bt()},500)):t("fileItemClick",r,i.file,i.idx)},V=()=>{if(P.value){P.value=!1,S.value&&S.value.pause();return}l.magicSwitchTiktokView?t("tiktokView",i.file,i.idx):At(i.file,r=>t("contextMenuClick",{key:`toggle-tag-${r}`},i.file,i.idx),()=>t("tiktokView",i.file,i.idx))},R=()=>{l.magicSwitchTiktokView?t("tiktokView",i.file,i.idx):kt(i.file,r=>t("contextMenuClick",{key:`toggle-tag-${r}`},i.file,i.idx),()=>t("tiktokView",i.file,i.idx))};return(r,c)=>{const w=G,D=Me,O=Fe,L=_t,W=It;return s(),C(w,{trigger:["contextmenu"],visible:I(l).longPressOpenContextMenu?typeof r.idx=="number"&&r.showMenuIdx===r.idx:void 0,"onUpdate:visible":c[8]||(c[8]=$=>typeof r.idx=="number"&&t("update:showMenuIdx",$?r.idx:-1))},{overlay:g(()=>[r.enableRightClickMenu?(s(),C($e,{key:0,file:r.file,idx:r.idx,"selected-tag":A.value,onContextMenuClick:c[7]||(c[7]=($,b,j)=>t("contextMenuClick",$,b,j)),"is-selected-mutil-files":r.isSelectedMutilFiles},null,8,["file","idx","selected-tag","is-selected-mutil-files"])):h("",!0)]),default:g(()=>{var $;return[(s(),d("li",{class:J(["file file-item-trigger grid",{clickable:r.file.type==="dir",selected:r.selected}]),"data-idx":r.idx,key:r.file.name,draggable:"true",onDragstart:c[4]||(c[4]=b=>t("dragstart",b,r.idx)),onDragend:c[5]||(c[5]=b=>t("dragend",b,r.idx)),onDragover:k,onDrop:K,onClickCapture:c[6]||(c[6]=b=>q(b))},[o("div",null,[r.enableCloseIcon?(s(),d("div",{key:0,class:"close-icon",onClick:c[0]||(c[0]=b=>t("close-icon-click"))},[v(I(dt))])):h("",!0),r.enableRightClickMenu?(s(),d("div",Fn,[v(w,null,{overlay:g(()=>[v($e,{file:r.file,idx:r.idx,"selected-tag":A.value,onContextMenuClick:c[1]||(c[1]=(b,j,We)=>t("contextMenuClick",b,j,We)),"is-selected-mutil-files":r.isSelectedMutilFiles},null,8,["file","idx","selected-tag","is-selected-mutil-files"])]),default:g(()=>[o("div",Rn,[v(I(ut))])]),_:1}),r.file.type==="file"?(s(),C(w,{key:0},{overlay:g(()=>[Q.value.length>1?(s(),C(O,{key:0,onClick:c[2]||(c[2]=b=>t("contextMenuClick",b,r.file,r.idx))},{default:g(()=>[(s(!0),d(N,null,M(Q.value,b=>(s(),C(D,{key:`toggle-tag-${b.id}`},{default:g(()=>[p(u(b.name)+" ",1),b.selected?(s(),C(I(Ve),{key:0})):(s(),C(I(je),{key:1}))]),_:2},1024))),128))]),_:1})):h("",!0)]),default:g(()=>{var b,j;return[o("div",{class:J(["float-btn-wrap",{"like-selected":(b=T.value)==null?void 0:b.selected}]),onClick:H},[(j=T.value)!=null&&j.selected?(s(),C(I(ft),{key:0})):(s(),C(I(ct),{key:1}))],2)]}),_:1})):h("",!0)])):h("",!0),I(Ie)(r.file.name)?(s(),d("div",{key:r.file.fullpath,class:J(`idx-${r.idx} item-content`)},[r.enableChangeIndicator&&f.value&&m.value?(s(),C($n,{key:0,"gen-diff-to-next":f.value,"gen-diff-to-previous":m.value},null,8,["gen-diff-to-next","gen-diff-to-previous"])):h("",!0),v(L,{src:z.value,fallback:I(zt),preview:{src:r.fullScreenPreviewImageUrl,onVisibleChange:(b,j)=>t("previewVisibleChange",b,j)}},null,8,["src","fallback","preview"]),A.value&&r.cellWidth>X?(s(),d("div",Vn,[(s(!0),d(N,null,M(r.extraTags??A.value,b=>(s(),C(W,{key:b.id,color:I(a).getColor(b)},{default:g(()=>[p(u(b.name),1)]),_:2},1032,["color"]))),128))])):h("",!0)],2)):I(ht)(r.file.name)?(s(),d("div",{key:3,class:J([`idx-${r.idx} item-content video`,{"playing-inline":P.value}]),url:I(se)(r.file),style:Ne({"background-image":P.value?"none":`url('${r.file.cover_url??I(se)(r.file)}')`}),onClick:V},[r.cellWidth>400&&P.value?(s(),d("video",{key:0,ref:b=>S.value=b,src:I(_e)(r.file),class:"inline-video-player",onEnded:B,onClick:c[3]||(c[3]=gt(()=>{},["stop"])),controls:""},null,40,Ln)):h("",!0),F.value?(s(),d("div",{key:1,class:"inline-play-overlay",onClick:E},[o("div",Jn,[o("img",{src:I(Pe),class:"play-icon-img"},null,8,Hn),o("span",Un,u(I(n)("playInline")),1)])])):h("",!0),Oe(o("div",Kn,[o("img",{src:I(Pe),style:{width:"40px",height:"40px"}},null,8,Wn)],512),[[pt,!P.value]]),A.value&&r.cellWidth>X?(s(),d("div",Yn,[(s(!0),d(N,null,M(A.value,b=>(s(),C(W,{key:b.id,color:I(a).getColor(b)},{default:g(()=>[p(u(b.name),1)]),_:2},1032,["color"]))),128))])):h("",!0)],14,jn)):I(mt)(r.file.name)?(s(),d("div",{key:4,class:J(`idx-${r.idx} item-content audio`),onClick:R},[Gn,A.value&&r.cellWidth>X?(s(),d("div",qn,[(s(!0),d(N,null,M(A.value,b=>(s(),C(W,{key:b.id,color:I(a).getColor(b)},{default:g(()=>[p(u(b.name),1)]),_:2},1032,["color"]))),128))])):h("",!0)],2)):(s(),d("div",Zn,[r.file.type==="file"?(s(),C(I(Dt),{key:0,class:"icon center"})):($=r.coverFiles)!=null&&$.length&&r.cellWidth>160?(s(),d("div",xn,[(s(!0),d(N,null,M(r.coverFiles,b=>(s(),d("img",{class:"dir-cover-item",src:b.media_type==="image"?I(ke)(b):I(se)(b),key:b.fullpath},null,8,Xn))),128))])):(s(),C(I(vt),{key:2,class:"icon center"}))])),r.cellWidth>X?(s(),d("div",es,[o("div",{class:"name line-clamp-1",title:r.file.name},u(r.file.name),9,ts),o("div",is,[o("div",ns,u(r.file.type)+" "+u(r.file.size),1),o("div",null,u(r.file.date),1)])])):h("",!0)])],42,Mn))]}),_:1},8,["visible"])}}});const rs=Re(ss,[["__scopeId","data-v-967be71e"]]);export{rs as F,$e as _,Ke as s};
